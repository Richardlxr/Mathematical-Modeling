> [!important] ⭐ 需首先确定的问题
> 1.**目标层（Target Layer）**：评价的目标是什么？
> 2.**准则层（Criterion Layer）**：评价的标准是什么？
> 3.**方案层（Alternative Layer）**：可选方案有哪些？
> 

# 层次分析法的主要步骤

## 一、两两比较法确定指标重要性
![[Screenshot 2026-01-25 at 19.20.55.png]]

### **这样我们就得到了几个指标之间的判断矩阵（Judgment Matrix）**
-  记作 $A = (a_{ij})_{n \times n}$。
*   性质：$a_{ij} > 0$，$a_{ii} = 1$，$a_{ij} = 1/a_{ji}$（正互反矩阵）。

## 二、确定待选方案在某一指标下的得分
![[Screenshot 2026-01-25 at 19.24.15.png]]

## 三、 一致性检验（Consistency Check）
### 1. 产生原因
*   在两两比较中可能出现逻辑矛盾（如 A > B, B > C, 但 C > A），此时矩阵为“不一致矩阵”。![[Screenshot 2026-01-25 at 19.33.02.png]]
### 一致矩阵$$ a_{ij} \cdot a_{jk} = a_{ik} $$
- 秩为1
- 唯一非零特征根为n
- 任意列向量都是对应特征值为n的特征向量
- 不一致时，最大特征值$\lambda_{max}>n$，两者差值越大，不一致程度越大

### 2. 检验步骤
*   **计算一致性指标 CI**：$CI = \frac{\lambda_{max} - n}{n - 1}$（$\lambda_{max}$ 为最大特征根，$n$ 为矩阵阶数）。
*   **查找随机一致性指标 RI**：根据 $n$ 值查表（如图）获取标准 RI 值（1-11 阶）。
*   **计算一致性比例 CR**：$CR = \frac{CI}{RI}$。
*   **判断标准**：
    *   若 $CR < 0.1$，认为矩阵的一致性可以接受。
    *   若 $CR \geq 0.1$，需要对判断矩阵进行修正（往“成倍数关系”上靠）。
![[Screenshot 2026-01-25 at 19.41.22.png]]
在层次分析法（AHP）中，如果一致性比率 **$CR \geq 0.1$**，说明你的判断矩阵逻辑存在“自相矛盾”的地方，需要进行**一致化处理（修正矩阵）**。

在数学建模比赛中，如果你手动填的数据导致 $CR \geq 0.1$，不需要大改：
1.  **微调法**：看看哪两个数打架最厉害，稍微把那个 5 改成 4，或者把 2 改成 2.5，通常 $CR$ 很快就能降下来。
2.  **计算器大法**：现在有很多在线的 AHP 计算器，或者 MATLAB 脚本。你可以先随便填个数，如果 $CR$ 不行，直接用 MATLAB 生成一个由权重向量 $w$ 构成的矩阵 $A = (w_i/w_j)$，这个矩阵必然是一致的，然后再把里面的小数稍微圆整一下写进论文。

## 四、 权重计算方法
### 1. 算术平均法
1. 将判断矩阵按列归一化。
2. 将归一化后的各列相加（按行求和）。
3. 除以 $n$ 得到权重向量。
![[Screenshot 2026-01-25 at 19.43.13.png]]
![[Screenshot 2026-01-25 at 19.46.21.png]]

> [!important] ⭐ Key point
> 论文实操
> ![[Screenshot 2026-01-25 at 19.46.58.png]]
> （勘误，应该是行相加，具体用的时候去修改）

### 2. 特征值法（重点/推荐）
1. 计算判断矩阵的最大特征根 $\lambda_{max}$ 及其对应的特征向量。
2. 对该特征向量进行归一化，即得到权重。
*   *建议：实际比赛中建议使用特征值法，或==（为了凑字数）==同时使用两种方法取平均值。*

![[Screenshot 2026-01-25 at 19.51.24 1.png]]
## 五、 最终评分与总排序
### 1. 综合得分计算
*   公式：方案得分 = $\sum (\text{该方案在指标 } i \text{ 上的得分} \times \text{指标 } i \text{ 的权重})$。
### 2. 层次总排序一致性检验
*   对整个评价体系进行综合一致性验证，确保整体逻辑不冲突。
![[Screenshot 2026-01-25 at 19.54.06.png]]

**（此表格需放置在论文中）
## 六、 实战套路与写作建议

*   **数据来源**：实际建模中，判断矩阵的打分可参考：网上搜集资料、问卷调查、专家打分（论文中可虚构“聘请了 20 名专家进行打分”以增强说服力）。
*   **辅助工具**：
    *   绘图：ProcessOn（绘图）（平替：draw.io）、亿图。
    *   计算：MATLAB、Excel。
*   **数据库参考**：知网（CNKI）、Web of Science、百度学术。



## 七、大佬实操![[Screenshot 2026-01-25 at 19.58.14.png]]

![[Screenshot 2026-01-25 at 19.58.26.png]]